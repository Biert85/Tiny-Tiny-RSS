image: php:5.6

before_script:
  - curl -o /usr/bin/phpmd -L http://static.phpmd.org/php/2.6.0/phpmd.phar
  - chmod +x /usr/bin/phpmd

stages:
  - test

jobs:
  when: manual
  stage: test
  script:
    - phpmd include text utils/gitlab-ci/phpmd-ruleset.xml
    - phpmd classes text utils/gitlab-ci/phpmd-ruleset.xml
    - FILES=$(ls -dm *.php | sed "s/ //g") && phpmd $FILES text utils/gitlab-ci/phpmd-ruleset.xml
